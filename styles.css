:root{
  --bg-900: #0f0a0b;
  --bg-800: #241014;
  --panel: rgba(255,255,255,0.03);
  --glass: rgba(255,255,255,0.03);
  --cream: #f6ecd9;
  --gold-1: #c9a55c;
  --gold-2: #e4c67a;
  --accent: #ffb78a;
  --text: #f2efe9;
  --muted: #d5c9b3;
  --shadow: rgba(6,4,4,0.6);
  --glass-blur: 10px;
  font-family: 'Cairo', system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
  --radius: 12px;

  --touch-pad: 14px; /* extra spacing for touch targets */
  --small-breakpoint: 900px;
  --phone-breakpoint: 480px;
}

/* Reset & touch optimizations */
*{box-sizing:border-box}
html,body{height:100%;margin:0;background:linear-gradient(180deg,var(--bg-900),var(--bg-800));color:var(--text);-webkit-font-smoothing:antialiased; -webkit-text-size-adjust:100%;}
a{color:inherit;text-decoration:none}
button, a, input, select, textarea{touch-action:manipulation; -webkit-tap-highlight-color: rgba(0,0,0,0.08)}
button{font-family:inherit}

/* subtle textured background */
body::before{
  content:"";
  position:fixed;inset:0;z-index:-1;
  background:
    radial-gradient(900px 420px at 8% 12%, rgba(228,198,122,0.03), transparent 14%),
    radial-gradient(600px 320px at 92% 86%, rgba(200,140,80,0.02), transparent 10%);
  mix-blend-mode:overlay;
  pointer-events:none;
}

/* App shell */
.app-shell{min-height:100vh;display:flex;flex-direction:column}
.topbar{
  display:flex;justify-content:space-between;align-items:center;padding:12px 16px;
  background:linear-gradient(180deg, rgba(255,255,255,0.01), transparent);
  border-bottom:1px solid rgba(255,255,255,0.02);
  backdrop-filter: blur(6px);
  gap:10px;
  padding-top: calc(env(safe-area-inset-top) + 10px);
}
.logo h1{margin:0;font-size:18px;letter-spacing:0.6px;color:var(--cream);font-family:'Playfair Display', serif}
.logo .tag{margin-top:4px;font-size:11px;color:var(--muted)}

/* Status */
.status{display:flex;gap:8px;align-items:center}
.player-meta{display:flex;flex-direction:column;align-items:flex-end;gap:6px;margin-right:8px}
.level{width:140px}
#player-level{font-weight:700;font-size:12px}
.xp-bar{height:6px;background:rgba(255,255,255,0.03);border-radius:6px;margin-top:6px;overflow:hidden}
#xp-fill{height:100%;background:linear-gradient(90deg,var(--gold-1),var(--gold-2));width:0%;}
.streak{font-weight:700;color:var(--gold-2);font-size:12px}

/* Coins */
.coins{
  font-weight:700;background:linear-gradient(90deg, rgba(255,255,255,0.02), transparent);
  padding:8px 12px;border-radius:999px;display:flex;align-items:center;gap:10px;border:1px solid rgba(255,255,255,0.03)
}
.icon{width:18px;height:18px;display:inline-block;vertical-align:middle;fill:var(--gold-2);color:var(--gold-2)}

/* sound control */
.sound-control{display:flex;align-items:center;gap:8px}
.sound-control .volume-slider{width:110px;appearance:none;background:transparent}
.volume-slider::-webkit-slider-runnable-track{height:4px;border-radius:999px;background:linear-gradient(90deg,var(--gold-1),var(--gold-2))}
.volume-slider::-webkit-slider-thumb{appearance:none;width:12px;height:12px;border-radius:50%;background:var(--cream);margin-top:-4px;box-shadow:0 4px 10px rgba(0,0,0,0.35)}

/* Buttons */
.btn{
  display:inline-flex;align-items:center;gap:8px;
  background:linear-gradient(90deg,var(--gold-1),var(--gold-2));
  color:#2b120d;font-weight:600;padding:10px 14px;border-radius:12px;border:none;cursor:pointer;
  box-shadow:0 8px 20px rgba(0,0,0,0.35);
  transition:transform .12s ease, box-shadow .12s ease, filter .12s ease, opacity .12s ease;
  transform-origin:center;
  font-size:14px;
}
.btn:active{transform:translateY(1px) scale(0.995)}
.btn.small{padding:8px 10px;font-size:13px;border-radius:10px}
.btn.ghost{background:transparent;border:1px solid rgba(255,255,255,0.06);color:var(--muted)}
.touch-target{padding: calc(var(--touch-pad)); border-radius:14px}

/* Hover & touch-friendly focus effect */
.btn:hover, .btn.hover, .hoverable:hover, .hoverable.hover { transform: translateY(-4px); box-shadow: 0 18px 40px rgba(0,0,0,0.45); filter:brightness(1.02); }
button:focus{outline:2px solid rgba(255,255,255,0.06);outline-offset:3px}

/* Main */
.container{flex:1;padding:18px;max-width:1180px;margin:0 auto}
.stages-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(220px,1fr));gap:12px}

/* Stage card */
.stage-card{
  position:relative;padding:14px;border-radius:12px;
  background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
  border:1px solid rgba(255,255,255,0.02);
  box-shadow:0 10px 28px var(--shadow);
  overflow:hidden;
  transition:transform .14s ease, box-shadow .14s ease;
}
.stage-card .meta{color:var(--muted);font-size:13px;margin-top:6px}
.stage-card .actions{margin-top:10px;display:flex;gap:8px;flex-wrap:wrap}
.stage-card .lock-overlay{
  position:absolute;inset:0;background:linear-gradient(180deg, rgba(0,0,0,0.5), rgba(0,0,0,0.66));
  display:flex;align-items:center;justify-content:center;font-size:15px;color:var(--muted);backdrop-filter: blur(4px)
}

/* Game screen */
.game-screen{margin-top:18px}
.hidden{display:none}
.game-header{display:flex;justify-content:space-between;align-items:center;gap:8px}
.game-header .left{display:flex;align-items:center;gap:8px}
.stage-info h2{margin:0;font-size:16px}
.smallnote{color:var(--muted);font-size:13px}

/* star display */
.star-display{margin-top:8px}
.star-display .star{display:inline-block;margin-left:6px;color:rgba(255,255,255,0.12)}
.star-display .star.on{color:var(--gold-2)}

/* Actor card */
.actor-card{
  margin-top:12px;background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
  padding:16px;border-radius:14px;display:flex;flex-direction:column;gap:12px;align-items:center;
  box-shadow:0 16px 34px rgba(0,0,0,0.5)
}
.actor-image-wrap{
  width:100%;max-width:360px;height:320px;border-radius:12px;background:linear-gradient(180deg, rgba(0,0,0,0.35), rgba(255,255,255,0.02));
  display:flex;align-items:center;justify-content:center;overflow:hidden;border:6px solid rgba(255,235,200,0.03);
  position:relative;
}
.actor-image-wrap img{width:100%;height:100%;object-fit:contain;display:block;transition:transform .4s ease}
.actor-image-wrap:hover img, .actor-image-wrap.hover img{transform:scale(1.04)}

/* Options */
.options-grid{display:grid;grid-template-columns:repeat(2,1fr);gap:10px;width:100%;max-width:760px}
.option{
  padding:14px;border-radius:12px;border:1px solid rgba(255,255,255,0.03);cursor:pointer;text-align:center;
  background:linear-gradient(180deg, rgba(255,255,255,0.01), transparent);
  transition:transform .10s ease, box-shadow .10s ease, background .10s ease;
  box-shadow:0 6px 18px rgba(0,0,0,0.35);
  user-select:none;
  -webkit-tap-highlight-color: transparent;
  font-size:15px;
}
.option:hover, .option.hover{transform:translateY(-4px)}
.option.correct{border:1px solid rgba(60,140,60,0.6);box-shadow:0 12px 28px rgba(60,140,60,0.06);background:linear-gradient(180deg, rgba(60,140,60,0.06), rgba(255,255,255,0.01))}
.option.wrong{border:1px solid rgba(200,60,60,0.6);opacity:0.95;background:linear-gradient(180deg, rgba(200,60,60,0.04), rgba(255,255,255,0.01))}

/* disabled state */
.option.disabled{opacity:0.55;pointer-events:none}

/* helpers row */
.helpers-row{display:flex;flex-direction:row;justify-content:space-between;align-items:center;width:100%;max-width:760px;gap:8px}
.powerups{display:flex;gap:8px;flex-wrap:wrap}
.powerups .btn{font-size:13px;padding:8px 10px;border-radius:10px}

/* Game footer */
.game-footer{display:flex;align-items:center;gap:12px;width:100%;max-width:760px;justify-content:space-between}
#round-result{color:var(--muted);font-weight:600}
.footer-actions{display:flex;gap:8px;align-items:center}

/* badges */
.badges-panel{margin-top:18px}
.badges{display:flex;gap:8px;flex-wrap:wrap}
.badge{padding:8px 12px;border-radius:10px;background:rgba(255,255,255,0.02);border:1px solid rgba(255,255,255,0.03);font-size:13px;color:var(--muted)}

/* ad styles */
.banner-ad { width:100%;max-width:360px;margin:12px auto;border-radius:12px;overflow:hidden;box-shadow:0 6px 18px rgba(0,0,0,0.35);transition:transform .25s ease,opacity .25s ease;}
.ad-modal { position:fixed; inset:0;display:flex;align-items:center;justify-content:center;background:rgba(0,0,0,0.72);z-index:1000}
.ad-modal.hidden{display:none}
.ad-content { background:#121212;padding:18px;border-radius:14px;text-align:center;max-width:90%;width:360px;box-shadow:0 12px 36px rgba(0,0,0,0.6)}
.ad-content img{width:100%;border-radius:10px;object-fit:cover}
#ad-timer{margin-top:10px;font-size:18px;color:var(--gold-2);font-weight:700}
.close-ad{position:absolute;top:12px;right:12px;background:rgba(0,0,0,0.6);color:var(--gold-2);border:2px solid var(--gold-2);border-radius:50%;width:44px;height:44px;display:flex;align-items:center;justify-content:center;cursor:pointer;z-index:10}

/* responsive tweaks */
@media (max-width: 900px){
  .player-meta{display:none} /* hide heavy meta on small screens */
  .actor-image-wrap{max-width:320px;height:280px}
  .options-grid{grid-template-columns:1fr}
  .stage-card{padding:12px}
  .container{padding:14px}
  .sound-control .volume-slider{width:80px}
  .btn{font-size:15px;padding:10px 12px}
  .touch-target{padding:calc(var(--touch-pad) + 4px)}
  .ad-content{width:92%;height:auto}
}

/* phone / narrow */
@media (max-width: 480px){
  .topbar{padding:10px 12px}
  .logo h1{font-size:16px}
  .actor-image-wrap{height:240px;border-radius:10px;border-width:6px}
  .actor-card{padding:12px;border-radius:12px}
  .btn{width:100%;justify-content:center}
  .powerups{flex-direction:column;align-items:stretch}
  .helpers-row{flex-direction:column;align-items:stretch;gap:10px}
  .ad-content{width:100%;height:100%;border-radius:0;padding:16px}
  .close-ad{top:18px;right:18px;width:48px;height:48px}
  .badges{gap:6px}
  .sound-control{display:none} /* hide sound slider on tiny screens to save space */
  .player-meta{display:none}
}

/* avoid accidental horizontal scroll */
html,body{overflow-x:hidden}

/* ================= Auth Modal ================= */

.auth-modal {
  position: fixed;
  inset: 0;
  background: rgba(0, 0, 0, 0.65);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 1000;
  backdrop-filter: blur(4px);
}

.auth-modal.hidden {
  display: none;
}

.auth-card {
  width: 92%;
  max-width: 380px;
  background: var(--bg-800, #1b0f12);
  border-radius: 16px;
  padding: 20px;
  box-shadow: 0 25px 60px rgba(0,0,0,0.45);
  animation: authFade 0.3s ease;
}

/* العنوان */
.auth-card h3 {
  text-align: center;
  margin-bottom: 14px;
  font-weight: 600;
  letter-spacing: 0.5px;
}

/* الحقول */
.auth-card input {
  width: 100%;
  padding: 12px 14px;
  margin-top: 10px;
  border-radius: 12px;
  border: 1px solid rgba(255,255,255,0.08);
  background: rgba(255,255,255,0.04);
  color: var(--cream, #f6ecd9);
  font-family: inherit;
  transition: border-color 0.2s, background 0.2s;
}

.auth-card input::placeholder {
  opacity: 0.6;
}

.auth-card input:focus {
  outline: none;
  border-color: var(--gold-1, #c9a55c);
  background: rgba(255,255,255,0.06);
}

/* الأزرار */
.auth-card .btn {
  flex: 1;
  min-width: 110px;
}

.auth-card .btn.danger {
  background: #7a1e25;
  color: #fff;
}

/* الروابط والملاحظات */
.auth-card .smallnote {
  font-size: 12px;
  opacity: 0.7;
  text-align: center;
}

.auth-card a {
  color: var(--gold-1, #c9a55c);
  text-decoration: none;
}

.auth-card a:hover {
  text-decoration: underline;
}

/* حركة خفيفة */
@keyframes authFade {
  from {
    opacity: 0;
    transform: translateY(12px) scale(0.98);
  }
  to {
    opacity: 1;
    transform: translateY(0) scale(1);
  }
}

